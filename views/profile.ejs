<%- include('partials/header') -%>
<div class="container-fluid bg-image" style="
background-image: url('/imgs/background.jpg');
height: 100vh;
">
  <div class="row justify-content-center my-4">
    <div class="col-6 my-5">
      <div class="container text-center">
        <h1 class="display-2">Welcome <%= user.userName %>!</h1>
      </div>
    </div>  
    <div class="row justify-content-center my-5">
      <form class="w-50 needs-validation" action="/search" method="POST">
        <label for="search" class="form-label">Search Movies!</label>
        <input type="search" class="form-control" id="search" name="search" placeholder="Enter movie name" required>
        <button type="submit" class="btn btn-primary mt-2">Search</button>
      </form>
    </div>  
  </div>

  <div class="container-fluid mt-5 text-center">
    <div class="row justify-content-around">
      <div class="col-md-5">
        <h2 class="border-bottom pb-2">Your Lists</h2>

        <% let userLists = lists.filter(list => list.user == user.id) %>

        <% if (userLists) { %>
          <div class="list-group">
            <% for (let i = 0; i < userLists.length; i++) { %>
              <a href="post/customList/<%= userLists[i].id %>" class="list-group-item list-group-item-action"><%= userLists[i].title %>  Likes: <%= userLists[i].likes %></a>        
            <% } %>
          </div>
        <% } else {%>
              <span class="d-block my-5">Click below to create your first list!</span>
              <span class="d-block my-5"><a href="/createList"><i class="fas fa-plus-circle fa-5x"></i></a></span>
        <% } %>  

      </div>
      <div class="col-md-5">
        <h2 class="border-bottom pb-2">Top Community Lists</h2>

        <% if (lists) { %>
          <div class="list-group"> 
            <% for (let i = 0; i < lists.length; i++) { %> 
              <a href="post/customList/<%= lists[i].id %>" class="list-group-item list-group-item-action"><%= lists[i].title %>  Likes: <%= lists[i].likes %></a>
            <% } %>
          </div>
        <% } else { %>
            <span class="d-block my-5">No Community Lists to Display!</span>
        <% } %> 

      </div>
    </div>
  </div>
</div>
<%- include('partials/footer') -%>